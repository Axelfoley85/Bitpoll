{% extends "base.html" %}

{% block title %}Dudel Index{% endblock %}

{% block content %}
    {{ poll.title }}<br>
    {{ poll.due_date }}<br>
    {{ poll.anonymous_allowed }}<br>
    {{ poll.description }}<br>

    <label>Choices:</label>
    {% for choice in poll.choice_set.all %}
        {{ choice }}
    {% endfor %}
    <br />

    <!-- TODO efficiency of listing of all votes by real sql-statement -->
    {% for vote in poll.vote_set.all %}
        <label> {{ vote.user.username }}: </label>
            {% for choice in poll.choice_set.all %}
                {% for  vote_choice in choice.votechoice_set.all%}
                    {% if vote_choice.vote_id == vote %}
                        {{ vote_choice.value_id.title }}
                        {{ vote_choice.comment }}
                    {% endif %}
                {% endfor %}
            {% endfor %}
        <br />
    {% endfor %}

{% endblock %}